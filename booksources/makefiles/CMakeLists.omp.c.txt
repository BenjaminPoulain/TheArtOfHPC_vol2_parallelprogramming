cmake_minimum_required( VERSION 3.20 )
project( c_omp VERSION 1.0 )

find_package(OpenMP)
if(OpenMP_C_FOUND)
else()
	message( FATAL_ERROR "Could not find OpenMP" )
endif()

option( programs "list of programs" )
foreach( program IN LISTS programs )
    message( NOTICE "program: ${program}" )
    add_executable( ${program} ${program}.c )
    target_compile_features( ${program} PRIVATE c_std_99 )
    target_link_libraries( ${program} PUBLIC OpenMP::OpenMP_C )
    install( TARGETS ${program} DESTINATION . )
endforeach()
